<!DOCTYPE html>
<html>
	<head>
		<link rel="icon" href="10x10.png">
		<link rel="stylesheet" href="BlockPuzzle.css">
		<title>Block Puzzle [10x10]</title>
		<style>
			td {
				width: 56px;
				height: 56px;
				font: 400 36px Montserrat;
				outline: 1px solid black;
				text-align: center;
				color: white;
				text-shadow: 0.75px 0.75px 0 #000, -0.75px -0.75px 0 #000, -0.75px 0.75px 0 #000, 0.75px -0.75px 0 #000;
			}
			td {
				color: black;
				text-shadow: 0.75px 0.75px 0 #fff, -0.75px -0.75px 0 #fff, -0.75px 0.75px 0 #fff, 0.75px -0.75px 0 #fff;
			}
		</style>
	</head>
	<body>
		<div id="banner"><span id="demo"></span></div>
		Time elapsed: <b id="time">0&apos;00&quot;<small>000</small></b><br>
		Moves: <b id="moves">0</b><br>
		Speed: <b id="speed">0<span style="font-size: 18px;">.00</span></b> moves / sec<br>
		<button onclick="newGame()">New Game</button><br>
		<a href="BlockPuzzle3.html">3x3</a>
		<a href="BlockPuzzle3x4.html">3x4</a>
		<a href="BlockPuzzle4.html">4x4</a><br>
		<a href="BlockPuzzle4x5.html">4x5</a>
		<a href="BlockPuzzle5.html">5x5</a>
		<a href="BlockPuzzle5x6.html">5x6</a><br>
		<a href="BlockPuzzle6.html">6x6</a>
		<a href="BlockPuzzle6x8.html">6x8</a>
		<a href="BlockPuzzle8.html">8x8</a><br>
		<a href="BlockPuzzle8x10.html">8x10</a>
		<b>10x10</b><br>
		<a href="BlockPuzzle10x12.html">10x12</a>
		<a href="BlockPuzzle12.html">12x12</a><br>
		<a href="BlockPuzzle15.html">15x15</a>
		<a href="BlockPuzzle20.html">20x20</a>
		<span style="position: absolute; top: 8px; right: 608px; width: 350px;">
			Your Best<br>
			Time: <b id="bestTime">999&apos;59&quot;<small>999</small></b><br>
			Moves: <b id="bestMoves">99,999</b><br>
			<a href="records.html">View all records &raquo;</a>
		</span>
		<table>
			<tr>
				<td id="c00" onclick="moveBlock(0, 0)">1</td>
				<td id="c01" onclick="moveBlock(0, 1)">2</td>
				<td id="c02" onclick="moveBlock(0, 2)">3</td>
				<td id="c03" onclick="moveBlock(0, 3)">4</td>
				<td id="c04" onclick="moveBlock(0, 4)">5</td>
				<td id="c05" onclick="moveBlock(0, 5)">6</td>
				<td id="c06" onclick="moveBlock(0, 6)">7</td>
				<td id="c07" onclick="moveBlock(0, 7)">8</td>
				<td id="c08" onclick="moveBlock(0, 8)">9</td>
				<td id="c09" onclick="moveBlock(0, 9)">10</td>
			</tr>
			<tr>
				<td id="c10" onclick="moveBlock(1, 0)">11</td>
				<td id="c11" onclick="moveBlock(1, 1)">12</td>
				<td id="c12" onclick="moveBlock(1, 2)">13</td>
				<td id="c13" onclick="moveBlock(1, 3)">14</td>
				<td id="c14" onclick="moveBlock(1, 4)">15</td>
				<td id="c15" onclick="moveBlock(1, 5)">16</td>
				<td id="c16" onclick="moveBlock(1, 6)">17</td>
				<td id="c17" onclick="moveBlock(1, 7)">18</td>
				<td id="c18" onclick="moveBlock(1, 8)">19</td>
				<td id="c19" onclick="moveBlock(1, 9)">20</td>
			</tr>
			<tr>
				<td id="c20" onclick="moveBlock(2, 0)">21</td>
				<td id="c21" onclick="moveBlock(2, 1)">22</td>
				<td id="c22" onclick="moveBlock(2, 2)">23</td>
				<td id="c23" onclick="moveBlock(2, 3)">24</td>
				<td id="c24" onclick="moveBlock(2, 4)">25</td>
				<td id="c25" onclick="moveBlock(2, 5)">26</td>
				<td id="c26" onclick="moveBlock(2, 6)">27</td>
				<td id="c27" onclick="moveBlock(2, 7)">28</td>
				<td id="c28" onclick="moveBlock(2, 8)">29</td>
				<td id="c29" onclick="moveBlock(2, 9)">30</td>
			</tr>
			<tr>
				<td id="c30" onclick="moveBlock(3, 0)">31</td>
				<td id="c31" onclick="moveBlock(3, 1)">32</td>
				<td id="c32" onclick="moveBlock(3, 2)">33</td>
				<td id="c33" onclick="moveBlock(3, 3)">34</td>
				<td id="c34" onclick="moveBlock(3, 4)">35</td>
				<td id="c35" onclick="moveBlock(3, 5)">36</td>
				<td id="c36" onclick="moveBlock(3, 6)">37</td>
				<td id="c37" onclick="moveBlock(3, 7)">38</td>
				<td id="c38" onclick="moveBlock(3, 8)">39</td>
				<td id="c39" onclick="moveBlock(3, 9)">40</td>
			</tr>
			<tr>
				<td id="c40" onclick="moveBlock(4, 0)">41</td>
				<td id="c41" onclick="moveBlock(4, 1)">42</td>
				<td id="c42" onclick="moveBlock(4, 2)">43</td>
				<td id="c43" onclick="moveBlock(4, 3)">44</td>
				<td id="c44" onclick="moveBlock(4, 4)">45</td>
				<td id="c45" onclick="moveBlock(4, 5)">46</td>
				<td id="c46" onclick="moveBlock(4, 6)">47</td>
				<td id="c47" onclick="moveBlock(4, 7)">48</td>
				<td id="c48" onclick="moveBlock(4, 8)">49</td>
				<td id="c49" onclick="moveBlock(4, 9)">50</td>
			</tr>
			<tr>
				<td id="c50" onclick="moveBlock(5, 0)">51</td>
				<td id="c51" onclick="moveBlock(5, 1)">52</td>
				<td id="c52" onclick="moveBlock(5, 2)">53</td>
				<td id="c53" onclick="moveBlock(5, 3)">54</td>
				<td id="c54" onclick="moveBlock(5, 4)">55</td>
				<td id="c55" onclick="moveBlock(5, 5)">56</td>
				<td id="c56" onclick="moveBlock(5, 6)">57</td>
				<td id="c57" onclick="moveBlock(5, 7)">58</td>
				<td id="c58" onclick="moveBlock(5, 8)">59</td>
				<td id="c59" onclick="moveBlock(5, 9)">60</td>
			</tr>
			<tr>
				<td id="c60" onclick="moveBlock(6, 0)">61</td>
				<td id="c61" onclick="moveBlock(6, 1)">62</td>
				<td id="c62" onclick="moveBlock(6, 2)">63</td>
				<td id="c63" onclick="moveBlock(6, 3)">64</td>
				<td id="c64" onclick="moveBlock(6, 4)">65</td>
				<td id="c65" onclick="moveBlock(6, 5)">66</td>
				<td id="c66" onclick="moveBlock(6, 6)">67</td>
				<td id="c67" onclick="moveBlock(6, 7)">68</td>
				<td id="c68" onclick="moveBlock(6, 8)">69</td>
				<td id="c69" onclick="moveBlock(6, 9)">70</td>
			</tr>
			<tr>
				<td id="c70" onclick="moveBlock(7, 0)">71</td>
				<td id="c71" onclick="moveBlock(7, 1)">72</td>
				<td id="c72" onclick="moveBlock(7, 2)">73</td>
				<td id="c73" onclick="moveBlock(7, 3)">74</td>
				<td id="c74" onclick="moveBlock(7, 4)">75</td>
				<td id="c75" onclick="moveBlock(7, 5)">76</td>
				<td id="c76" onclick="moveBlock(7, 6)">77</td>
				<td id="c77" onclick="moveBlock(7, 7)">78</td>
				<td id="c78" onclick="moveBlock(7, 8)">79</td>
				<td id="c79" onclick="moveBlock(7, 9)">80</td>
			</tr>
			<tr>
				<td id="c80" onclick="moveBlock(8, 0)">81</td>
				<td id="c81" onclick="moveBlock(8, 1)">82</td>
				<td id="c82" onclick="moveBlock(8, 2)">83</td>
				<td id="c83" onclick="moveBlock(8, 3)">84</td>
				<td id="c84" onclick="moveBlock(8, 4)">85</td>
				<td id="c85" onclick="moveBlock(8, 5)">86</td>
				<td id="c86" onclick="moveBlock(8, 6)">87</td>
				<td id="c87" onclick="moveBlock(8, 7)">88</td>
				<td id="c88" onclick="moveBlock(8, 8)">89</td>
				<td id="c89" onclick="moveBlock(8, 9)">90</td>
			</tr>
			<tr>
				<td id="c90" onclick="moveBlock(9, 0)">91</td>
				<td id="c91" onclick="moveBlock(9, 1)">92</td>
				<td id="c92" onclick="moveBlock(9, 2)">93</td>
				<td id="c93" onclick="moveBlock(9, 3)">94</td>
				<td id="c94" onclick="moveBlock(9, 4)">95</td>
				<td id="c95" onclick="moveBlock(9, 5)">96</td>
				<td id="c96" onclick="moveBlock(9, 6)">97</td>
				<td id="c97" onclick="moveBlock(9, 7)">98</td>
				<td id="c98" onclick="moveBlock(9, 8)">99</td>
				<td id="c99" onclick="moveBlock(9, 9)"></td>
			</tr>
		</table>
	</body>
	<script>
		var running = false;
		var board = [
			[1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
			[11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
			[21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
			[31, 32, 33, 34, 35, 36, 37, 38, 39, 40],
			[41, 42, 43, 44, 45, 46, 47, 48, 49, 50],
			[51, 52, 53, 54, 55, 56, 57, 58, 59, 60],
			[61, 62, 63, 64, 65, 66, 67, 68, 69, 70],
			[71, 72, 73, 74, 75, 76, 77, 78, 79, 80],
			[81, 82, 83, 84, 85, 86, 87, 88, 89, 90],
			[91, 92, 93, 94, 95, 96, 97, 98, 99, ""]
		];
		var size = [10, 10];
		var solved = board.slice();
		var start = 0, now = 0, elapsed = 0, m = 0, s = 0, ms = 0, moves = 0;
		if (localStorage.getItem("bestTime" + size[0] + "x" + size[1]) == null) {
			localStorage.setItem("bestTime10x10", 59999999);
		}
		if (localStorage.getItem("bestMoves10x10") == null) {
			localStorage.setItem("bestMoves10x10", 50000);
		}
		displayBest();
		function displayBest() {
			var best = localStorage.getItem("bestTime" + size[0] + "x" + size[1]), best_M = Math.floor(best / 60000), best_S = Math.floor(best % 60000 / 1000), best_MS = Math.floor(best % 1000);
			var bestMoves = localStorage.getItem("bestMoves" + size[0] + "x" + size[1]);
			document.getElementById("bestTime").innerHTML = (best_M > 0 ? (best_M + "&apos;" + ("0" + best_S).slice(-2)) : ("" + best_S)) + "&quot;<small>" + ("00" + best_MS).slice(-3) + "</small>";
			if (bestMoves >= 1000) {
				document.getElementById("bestMoves").innerHTML = Math.floor(bestMoves / 1000) + "," + ("00" + (bestMoves % 1000)).slice(-3);
			} else {
				document.getElementById("bestMoves").innerHTML = bestMoves;
			}
		}
		function newGame() {
			running = true;
			start = new Date().getTime();
			moves = 0;
			var nums = [
				1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
				11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
				21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
				31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
				41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
				51, 52, 53, 54, 55, 56, 57, 58, 59, 60,
				61, 62, 63, 64, 65, 66, 67, 68, 69, 70,
				71, 72, 73, 74, 75, 76, 77, 78, 79, 80,
				81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
				91, 92, 93, 94, 95, 96, 97, 98, 99
			];
			board = [
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""],
				["", "", "", "", "", "", "", "", "", ""]
			];
			var x = 0;
			while (x < nums.length) {
				var r = Math.floor(Math.random() * 10);
				var c = Math.floor(Math.random() * 10);
				if (board[r][c] == 0) {
					board[r][c] = nums[x];
					x++;
				}
			}
			reset();
		}
		setInterval(function() {
			if (running) {
				now = new Date().getTime();
				elapsed = now - start;
				m = Math.floor(elapsed / 60000);
				s = Math.floor(elapsed % 60000 / 1000);
				ms= Math.floor(elapsed % 1000);
				document.getElementById("speed").innerHTML = Math.floor((moves / elapsed) * 1000) + "<span style=\"font-size: 18px;\">." + ("0" + Math.floor(((moves / elapsed) * 100000) % 100)).slice(-2) + "</span>";
			}
			document.getElementById("time").innerHTML = (m > 0 ? (m + "&apos;" + ("0" + s).slice(-2)) : ("" + s)) + "&quot;<small>" + ("00" + ms).slice(-3) + "</small>";
			if (moves >= 1000) {
				document.getElementById("moves").innerHTML = Math.floor(moves / 1000) + "," + ("00" + (moves % 1000)).slice(-3);
			} else {
				document.getElementById("moves").innerHTML = moves;
			}
			var check = 0;
			for (var i = 0; i < 10; i++) {
				for (var j = 0; j < 10; j++) {
					document.getElementById("c" + i + j).innerHTML = board[i][j];
					if (board[i][j] == solved[i][j]) {
						check++;
					}
				}
			}
			if (check == 100) {
				running = false;
			}
		}, 0);
		function moveBlock(r, c) {
			r = parseInt(r);
			c = parseInt(c);
			if (running) {
				if (r > 0) {
					if (board[r - 1][c] == "") {
						board[r - 1][c] = board[r][c];
						board[r][c] = "";
						moves++;
					}
				}
				if (c > 0) {
					if (board[r][c - 1] == "") {
						board[r][c - 1] = board[r][c];
						board[r][c] = "";
						moves++;
					}
				}
				if (r < 9) {
					if (board[r + 1][c] == "") {
						board[r + 1][c] = board[r][c];
						board[r][c] = "";
						moves++;
					}
				}
				if (c < 9) {
					if (board[r][c + 1] == "") {
						board[r][c + 1] = board[r][c];
						board[r][c] = "";
						moves++;
					}
				}
				var check = 0;
				for (var i = 0; i < 10; i++) {
					for (var j = 0; j < 10; j++) {
						document.getElementById("c" + i + j).classList.remove("solved");
						document.getElementById("c" + i + j).innerHTML = board[i][j];
						if (board[i][j] == solved[i][j]) {
							check++;
							document.getElementById("c" + i + j).classList.add("solved");
						}
					}
				}
				var check = 0;
				for (var i = 0; i < size[0]; i++) {
					for (var j = 0; j < size[1]; j++) {
						document.getElementById("c" + i + j).classList.remove("solved");
						document.getElementById("c" + i + j).innerHTML = board[i][j];
						if (board[i][j] == solved[i][j]) {
							check++;
							document.getElementById("c" + i + j).classList.add("solved");
						}
					}
				}
				var check2 = 0;
				var check3 = 0;
				for (var i = 0; i < size[0]; i++) {
					for (var j = 0; j < size[1]; j++) {
						if (board[i][j] == solved[i][j]) {
							check2++;
						}
						check3++;
						if (check2 != check3) {
							break;
						}
					}
					if (check2 != check3) {
						break;
					}
				}
				for (var i = 0; i < size[0]; i++) {
					for (var j = 0; j < size[1]; j++) {
						document.getElementById("c" + i + j).classList.remove("next");
						if (board[i][j] == check2 + 1) {
							document.getElementById("c" + i + j).classList.add("next");
						}
					}
				}
        if (check == 98 && board[9][9] == "") {
          var gameover = confirm("Hmmm... this board does not seem solvable. Want to start a new game?");
          if (gameover == true) {
            newGame();
          } else if (gameover == false) {
            running = false;
            elapsed = 0;
            moves = 0;
            board = solved;
          }
        }
				if (check == 100) {
					running = false;
					if (elapsed < localStorage.getItem("bestTime" + size[0] + "x" + size[1]) || moves < localStorage.getItem("bestMoves" + size[0] + "x" + size[1])) {
						setTimeout(function() {
							document.getElementById("demo").innerHTML = "A NEW RECORD!"
							document.getElementById("demo").classList.add("finish");
							document.getElementById("banner").style.display = "block";
							setTimeout(function() {
								document.getElementById("demo").classList.remove("finish");
								document.getElementById("banner").style.display = "none";
							}, 1500);
						}, 2000);
					}
					if (elapsed < localStorage.getItem("bestTime10x10") || moves < localStorage.getItem("bestMoves10x10")) {
						localStorage.setItem("bestTime10x10", elapsed);
						displayBest();
					}
					if (moves < localStorage.getItem("bestMoves" + size[0] + "x" + size[1])) {
						localStorage.setItem("bestMoves10x10", moves);
						displayBest();
					}
					for (var i = 0; i < 10; i++) {
						for (var j = 0; j < 10; j++) {
							document.getElementById("c" + i + j).innerHTML = board[i][j];
						}
					}
					var completion = ["Good job", "Awesome", "Amazing", "Stellar", "Great job", "Fantastic", "Marvelous", "Way to go", "Nice job", "Congratulations", "Excellent", "Spectacular", "Terrific", "Great", "Impressive", "Well done"];
					document.getElementById("demo").innerHTML = completion[Math.floor(Math.random() * completion.length)].toUpperCase() + "!";
					document.getElementById("demo").classList.add("finish");
					document.getElementById("banner").style.display = "inline-block";
					setTimeout(function() {
						document.getElementById("demo").classList.remove("finish");
						document.getElementById("banner").style.display = "none";
					}, 1500);
				}
			}
		}
		function reset() {
			var check = 0;
			for (var i = 0; i < size[0]; i++) {
				for (var j = 0; j < size[1]; j++) {
					document.getElementById("c" + i + j).classList.remove("solved");
					document.getElementById("c" + i + j).innerHTML = board[i][j];
					if (board[i][j] == solved[i][j]) {
						check++;
						document.getElementById("c" + i + j).classList.add("solved");
					}
				}
			}
			var check2 = 0;
			var check3 = 0;
			for (var i = 0; i < size[0]; i++) {
				for (var j = 0; j < size[1]; j++) {
					if (board[i][j] == solved[i][j]) {
						check2++;
					}
					check3++;
					if (check2 != check3) {
						break;
					}
				}
				if (check2 != check3) {
					break;
				}
			}
			for (var i = 0; i < size[0]; i++) {
				for (var j = 0; j < size[1]; j++) {
					document.getElementById("c" + i + j).classList.remove("next");
					if (board[i][j] == check2 + 1) {
						document.getElementById("c" + i + j).classList.add("next");
					}
				}
			}
		}
		document.addEventListener("keydown", function(event) {
			if (event.key === "n") {
				newGame();
			} else if (event.key === "ArrowUp" || event.key === "ArrowRight" || event.key === "ArrowDown" || event.key === "ArrowLeft" || event.key === "w" || event.key === "a" || event.key === "s" || event.key === "d") {
				var holePos = [-1, -1];
				for (var i = 0; i < size[0]; i++) {
					for (var j = 0; j < size[1]; j++) {
						if (board[i][j] == "") {
							holePos = [i, j];
							break;
						}
					}
				}
				if ((event.key === "ArrowUp" || event.key === "w") && holePos[0] > 0) {
					moveBlock(holePos[0] - 1, holePos[1]);
				} else if ((event.key === "ArrowRight" || event.key === "d") && holePos[1] < size[1] - 1) {
					moveBlock(holePos[0], holePos[1] + 1);
				} else if ((event.key === "ArrowDown" || event.key === "s") && holePos[0] < size[0] - 1) {
					moveBlock(holePos[0] + 1, holePos[1]);
				} else if ((event.key === "ArrowLeft" || event.key === "a") && holePos[1] > 0) {
					moveBlock(holePos[0], holePos[1] - 1);
				}
			}
		});
		var darkModeOn = localStorage.getItem("darkMode");
		if (darkModeOn == null) {
			localStorage.setItem("darkMode", false);
		} else {
			document.body.classList.toggle("dark", darkModeOn);
		}
	</script>
</html>
